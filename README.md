# MapMap - 3D Earth Globe

ä¸€ä¸ªåŸºäº Three.js å’Œ React + TypeScript çš„äº¤äº’å¼ 3D åœ°çƒåº”ç”¨ï¼Œæ”¯æŒçœŸå®åœ°å›¾çº¹ç†å’Œåœ°ç†è¾¹ç•Œæ•°æ®å¯è§†åŒ–ã€‚

## ç‰¹æ€§

- âœ¨ ä½¿ç”¨ React Three Fiber æ„å»ºçš„ 3D åœ°çƒ
- ğŸŒ çœŸå®åœ°å›¾çº¹ç†æ¸²æŸ“
- ğŸ—ºï¸ SHP æ–‡ä»¶æ”¯æŒ - åŠ è½½å’Œæ¸²æŸ“åœ°ç†è¾¹ç•Œæ•°æ®
- ğŸ“Š å›¾å±‚æ§åˆ¶ç³»ç»Ÿ - åŠ¨æ€æ˜¾ç¤º/éšè—ä¸åŒè¾¹ç•Œçº¿
- ğŸ–±ï¸ å®Œæ•´çš„é¼ æ ‡äº¤äº’æ”¯æŒ
  - å·¦é”®æ‹–åŠ¨ï¼šæ—‹è½¬åœ°çƒ
  - æ»šè½®ï¼šç¼©æ”¾è§†å›¾
- ğŸ¨ ç°ä»£åŒ–çš„ UI è®¾è®¡
- ğŸŒŸ é«˜è´¨é‡åœ°çƒçº¹ç†

## æŠ€æœ¯æ ˆ

- **React 18** - UI æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Three.js** - 3D å›¾å½¢åº“
- **@react-three/fiber** - React çš„ Three.js æ¸²æŸ“å™¨
- **@react-three/drei** - Three.js è¾…åŠ©ç»„ä»¶åº“
- **shpjs** - Shapefile è§£æåº“

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºäº§ç‰©å°†è¾“å‡ºåˆ° `dist` ç›®å½•ã€‚

### é¢„è§ˆç”Ÿäº§æ„å»º

```bash
npm run preview
```

## é¡¹ç›®ç»“æ„

```
mapmap/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Globe.tsx           # 3D åœ°çƒç»„ä»¶ï¼ˆæ”¯æŒçº¹ç†è´´å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ BoundaryLayer.tsx   # è¾¹ç•Œçº¿å›¾å±‚ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LayerControl.tsx    # å›¾å±‚æ§åˆ¶é¢æ¿
â”‚   â”‚   â””â”€â”€ LayerControl.css    # å›¾å±‚æ§åˆ¶æ ·å¼
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ geoUtils.ts         # åœ°ç†æ•°æ®å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ shpjs.d.ts          # shpjs ç±»å‹å£°æ˜
â”‚   â”œâ”€â”€ App.tsx                 # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ App.css                 # åº”ç”¨æ ·å¼
â”‚   â”œâ”€â”€ main.tsx                # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css               # å…¨å±€æ ·å¼
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ earth_hq.jpg            # é«˜è´¨é‡åœ°çƒåº•å›¾çº¹ç†
â”‚   â””â”€â”€ shapefiles/             # Shapefile æ•°æ®
â”œâ”€â”€ åœ°å›¾æ•°æ®/                   # åŸå§‹åœ°å›¾æ•°æ®
â”‚   â”œâ”€â”€ 10m äº‰è®®/
â”‚   â”œâ”€â”€ 10m çœå·/
â”‚   â”œâ”€â”€ 110m å›½ç•Œ/
â”‚   â””â”€â”€ tif1.png
â”œâ”€â”€ index.html                  # HTML æ¨¡æ¿
â”œâ”€â”€ vite.config.ts              # Vite é…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â””â”€â”€ package.json                # é¡¹ç›®é…ç½®
```

## å·²å®ç°åŠŸèƒ½

- âœ… åŠ è½½å’Œæ¸²æŸ“é«˜è´¨é‡åœ°çƒçº¹ç†
- âœ… è§£æå’Œæ¸²æŸ“ SHP æ–‡ä»¶è¾¹ç•Œæ•°æ®ï¼ˆä½¿ç”¨ ArrayBuffer æ–¹å¼ï¼‰
- âœ… å¤šå›¾å±‚ç®¡ç†ç³»ç»Ÿ
- âœ… äº¤äº’å¼å›¾å±‚æ§åˆ¶é¢æ¿
- âœ… ç»çº¬åº¦åæ ‡åˆ°çƒé¢ 3D åæ ‡è½¬æ¢
- âœ… ä¼˜åŒ–çš„çº¹ç†æ˜ å°„ï¼ˆé¿å…æç‚¹æ’•è£‚ï¼‰

## æœªæ¥è®¡åˆ’

- ğŸ“ æ·»åŠ æ›´å¤šå›¾å±‚ï¼ˆçœå·è¾¹ç•Œã€äº‰è®®åœ°åŒºç­‰ï¼‰
- ğŸ¯ æ·»åŠ æ•°æ®å¯è§†åŒ–åŠŸèƒ½ï¼ˆçƒ­åŠ›å›¾ã€æ ‡è®°ç‚¹ç­‰ï¼‰
- ğŸ” åœ°ç‚¹æœç´¢å’Œå®šä½åŠŸèƒ½
- ğŸ“Š æ•°æ®ç»Ÿè®¡å’Œåˆ†æå·¥å…·

## å¼€å‘è¯´æ˜

### ç»„ä»¶è¯´æ˜

- **Globe.tsx**: æ ¸å¿ƒåœ°çƒç»„ä»¶ï¼Œä½¿ç”¨ TextureLoader åŠ è½½åœ°å›¾çº¹ç†
- **BoundaryLayer.tsx**: è¾¹ç•Œçº¿å›¾å±‚ç»„ä»¶ï¼Œè§£æ SHP æ–‡ä»¶å¹¶æ¸²æŸ“ä¸º 3D çº¿æ¡
- **LayerControl.tsx**: å›¾å±‚æ§åˆ¶é¢æ¿ï¼Œç®¡ç†å¤šä¸ªå›¾å±‚çš„æ˜¾ç¤ºçŠ¶æ€
- **App.tsx**: ä¸»åº”ç”¨ç»„ä»¶ï¼Œè®¾ç½® Canvasã€ç›¸æœºã€ç¯å…‰å’Œæ§åˆ¶å™¨
- **geoUtils.ts**: åœ°ç†æ•°æ®å·¥å…·ï¼ŒåŒ…å« SHP åŠ è½½å’Œåæ ‡è½¬æ¢å‡½æ•°

### æ·»åŠ æ–°çš„è¾¹ç•Œçº¿å›¾å±‚

åœ¨ `src/App.tsx` ä¸­æ·»åŠ æ–°å›¾å±‚é…ç½®ï¼š

```tsx
const [layers, setLayers] = useState<LayerConfig[]>([
  {
    id: 'countries',
    name: 'å›½ç•Œ (110m)',
    shpPath: '/shapefiles/ne_110m_admin_0_countries.shp',
    color: '#FFD700',
    visible: true,
  },
  // æ·»åŠ æ–°å›¾å±‚
  {
    id: 'provinces',
    name: 'çœå·è¾¹ç•Œ',
    shpPath: '/shapefiles/ne_10m_admin_1_states_provinces.shp',
    color: '#00CED1',
    visible: false,
  },
])
```

### è‡ªå®šä¹‰åœ°çƒçº¹ç†

æ›¿æ¢ `public/earth_hq.jpg` æ–‡ä»¶ï¼Œæˆ–åœ¨ `Globe.tsx` ä¸­ä¿®æ”¹çº¹ç†è·¯å¾„ï¼š

```tsx
const texture = useLoader(TextureLoader, '/your-texture.jpg')
```

è·å–æ›´é«˜è´¨é‡çš„åœ°çƒçº¹ç†ï¼Œè¯·å‚è€ƒ [TEXTURE_GUIDE.md](./TEXTURE_GUIDE.md)ã€‚

## License

MIT
